<!--
***********************************************************************************************
BasinModeling.Linux.props.xml

WARNING:  DO NOT MODIFY this file unless you are knowledgeable about MSBuild and have
          created a backup copy.  Incorrect changes to this file will make it
          impossible to load or build your projects from the command-line or the IDE.
***********************************************************************************************
-->

<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <PropertyGroup Label="Identification">
    <SvnRepoHost Condition="'$(SvnRepoHost)' == ''">amsd2a-n-b01002</SvnRepoHost>
    <AgentHost Condition="'$(AgentHost)' == ''">amsd2a-n-b01002</AgentHost>
    <AgentAccount Condition="'$(AgentAccount)' == ''">ksaho3</AgentAccount>
    <AgentKey Condition="'$(AgentKey)' == ''">C:\opt\putty\private_id.ppk</AgentKey>
  </PropertyGroup>
 
  <PropertyGroup Label="StandardUtilities" >
    <cygwin_bin_dir  Condition="'$(cygwin_bin_dir)' == '' And Exists('C:\cygwin\bin')" >C:\cygwin\bin\</cygwin_bin_dir>
    <cygwin_bin_dir  Condition="'$(cygwin_bin_dir)' == '' And Exists('D:\cygwin\bin')" >D:\cygwin\bin\</cygwin_bin_dir>
    <cygwin_bin_dir  Condition="'$(cygwin_bin_dir)' == '' And Exists('C:\opt\cygwin\bin')" >C:\opt\cygwin\bin\</cygwin_bin_dir>

    <putty_dir Condition="'$(putty_dir)' == '' And Exists('C:\opt\putty')">C:\opt\putty</putty_dir>

    <cpio_exe Condition="'$(cpio_exe)' == ''">"$(cygwin_bin_dir)cpio.exe"</cpio_exe>

    <!-- Command to start non interactive SSH session -->
    <ssh_command>$(putty_dir)\PLINK.exe -batch -ssh -i "$(AgentKey)" $(AgentAccount)@$(AgentHost)</ssh_command>
    
    <!-- Command to SCP (SSH copy). Note the 'echo y' which is necessary when copying 
         something to a destination host that has not been connected with before. 
         The 'y' answers yes to the question whether or not to trust the new host
     -->
    <scp_command>echo y | $(putty_dir)\PSCP.EXE -i "$(AgentKey)"</scp_command>

    <printenv>cmd /c set</printenv>

  </PropertyGroup>

  <PropertyGroup Label="Locations">
    <solution_root>$([System.IO.Path]::GetFullPath('$(MSBuildThisFileDirectory)\..\..'))</solution_root>
  </PropertyGroup>
  
  <Target Name="DispalyStandardVariables">
    <Message Text="TeamProject=$(TeamProject)"/>
    <Message Text="TeamFoundationServerUrl=$(TeamFoundationServerUrl)"/>
    <Message Text="BuildDefinitionName=$(BuildDefinitionName)"/>
    <Message Text="LinuxBuildRoot=$(LinuxBuildRoot)"/>
    <Message Text="BuildDefinitionID=$(BuildDefinitionID)"/>
    <Message Text="SourcePath=$(SourcePath)"/>
    <Message Text="Configuration=$(Configuration)"/>
    <Message Text="SourceGetVersion=$(SourceGetVersion)"/>
    <Message Text="IncrementalGet=$(IncrementalGet)"/>
    <Message Text="IncrementalBuild=$(IncrementalBuild)"/>
    <Message Text="OutDir=$(OutDir)"/>
    <Message Text="MSBuildProjectDirectory=$(MSBuildProjectDirectory)"/>
    <Message Text="BuildAgent=$(BuildAgent)" />
    <Message Text="Workspace=$(BuildAgent)" />
    <Message Text="BuildDirectory=$(BuildDirectory)" />
    <Message Text="LabelName=$(LabelName)" />
    <Message Text="WorkspaceName=$(WorkspaceName)" />
    <Message Text="SourcesDirectory=$(SourcesDirectory)" />
    <Message Text="BinariesDirectory=$(BinariesDirectory)" />
    <Message Text="TestResultsDirectory=$(TestResultsDirectory)" />
    <Message Text="BuildAgentId=$(BuildAgentId)" />
    <Message Text="BuildDefinitionPath=$(BuildDefinitionPath)" />
    <Message Text="AgentHost = $(AgentHost)" />
    <Message Text="AgentAccount = $(AgentAccount)" />
    <Message Text="AgentKey = $(AgentKey)" />
    <Message Text="cygwin_bin_dir = $(cygwin_bin_dir)" />
    <Message Text="cpio_exe = $(cpio_exe)" />
    <Message Text="putty_dir = $(putty_dir)"/>
    <Message Text="ssh_command = $(ssh_command)" />
    <Message Text="scp_command = $(scp_command)" />
    <Message Text="solution_root = $(solution_root)" />
  </Target>

  <Target Name="PrintEnv">
    <Exec Command="$(printenv)" />
  </Target>
</Project>